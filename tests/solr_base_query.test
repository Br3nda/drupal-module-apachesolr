<?php
// $Id: solr_base_query.test,v 1.1.4.3 2008/10/26 16:18:58 robertDouglass Exp $

class ApacheSolrBaseQueryTestCase extends DrupalWebTestCase {
  function getInfo() {
    return array('name' => 'Base query',
      'description' => 'Throw various queries at the query object and make sure they all parse correctly.',
      'group' => 'ApacheSolr');
  }

  /**
   * Implementation of setUp().
   */
  function setUp() {
    parent::setUp('search', 'apachesolr');
  }
  
  private $_queries = array(
    'foo',
    'foo bar',
    'foo bar "hubba baz"',
    'uid:1',
    'uid:1 uid:2',
    'foo bar uid:1 uid:2',
    'foo bar "I love you"',
    'foo bar baz -hubba',
    'foo -bar -term:31',
    'foo*',
    'foo?',
    'somefield:"I love you"',
  );

  function testParseSimple() {
    foreach ($this->_queries as $string) {
      $query = apachesolr_drupal_query($string, TRUE);
      // force the query to be rebuilt without removing any fields.
      $this->assertEqual($string, $string, $string);
    }
  }
}
